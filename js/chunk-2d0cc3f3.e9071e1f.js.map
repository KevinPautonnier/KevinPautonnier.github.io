{"version":3,"sources":["webpack:///./src/views/planning/Planning.vue?7e48","webpack:///src/views/planning/Planning.vue","webpack:///./src/views/planning/Planning.vue?146c","webpack:///./src/views/planning/Planning.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","_v","_s","hours","on","click","saveData","_e","attrs","events","header","event-selected","eventSelected","event-drop","eventDragStop","event-resize","eventResizeStop","staticRenderFns","moment","__webpack_require__","format","_dataModified","Planningvue_type_script_lang_js_","data","left","center","JSON","parse","sessionStorage","getItem","dataModified","methods","calEvent","jsEvent","view","alert","startHour","prompt","endHour","newDate","Date","start","setMinutes","forEach","event","title","console","log","setHours","end","setItem","stringify","hourCount","_this","now","day","startOf","duration","diff","asHours","created","planning_Planningvue_type_script_lang_js_","component","Object","componentNormalizer","options","__file","__webpack_exports__"],"mappings":"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","file":"js/chunk-2d0cc3f3.e9071e1f.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',[_vm._v(\"Nombre d'heure éffectuées : \"+_vm._s(_vm.hours))]),(_vm.dataModified)?_c('button',{on:{\"click\":_vm.saveData}},[_vm._v(\"Enregistrer les modifications\")]):_vm._e(),_c('full-calendar',{attrs:{\"events\":_vm.events,\"header\":_vm.header},on:{\"event-selected\":_vm.eventSelected,\"event-drop\":_vm.eventDragStop,\"event-resize\":_vm.eventResizeStop}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\r\n<template>\r\n  <div>\r\n    <div>Nombre d'heure éffectuées : {{hours}}</div>\r\n    <button v-on:click=\"saveData\" v-if=\"dataModified\">Enregistrer les modifications</button>\r\n    <full-calendar :events=\"events\" :header=\"header\" @event-selected=\"eventSelected\" @event-drop=\"eventDragStop\" @event-resize=\"eventResizeStop\"></full-calendar>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  var moment = require('moment');\r\n  moment().format();\r\n\r\n  var _dataModified = false\r\n\r\n  export default {\r\n    data () {\r\n      return {\r\n        header: {\r\n          left: 'today prev,next',\r\n          center: 'title',\r\n        },\r\n        events: JSON.parse(sessionStorage.getItem(\"planningData\")),\r\n        dataModified : _dataModified,\r\n        hours: 0\r\n      }\r\n    },\r\n\r\n    methods: {\r\n      eventSelected: function(calEvent, jsEvent, view) {\r\n          if(sessionStorage.getItem('role') == 'Salaried' || sessionStorage.getItem('role') == 'Human Resourses Director'){\r\n            alert('Vous n\\'avez pas le droit de modifier votre planning!');\r\n            this.events = JSON.parse(sessionStorage.getItem(\"planningData\"));\r\n          }\r\n          else{\r\n            var startHour = prompt(\"Entrer l'heure de début\", \"8\");\r\n            var endHour = prompt(\"Entrer l'heure de fin\", \"18\");\r\n            var newDate = new Date(calEvent.start)\r\n            newDate.setMinutes(0)\r\n            this.events.forEach(function(event){\r\n              if(event.title == calEvent.title){\r\n                console.log('toto')\r\n                event.start = moment(newDate.setHours(startHour))\r\n                event.end = moment(newDate.setHours(endHour))\r\n              }\r\n            })\r\n            this.dataModified = true\r\n          }\r\n\r\n       },\r\n      eventDragStop: function(calEvent){\r\n        console.log('drop')\r\n        \r\n        if(sessionStorage.getItem('role') == 'Salaried' || sessionStorage.getItem('role') == 'Human Resourses Director'){\r\n          alert('Vous n\\'avez pas le droit de modifier votre planning!');\r\n          this.events = JSON.parse(sessionStorage.getItem(\"planningData\"));\r\n        }\r\n        else{\r\n          var newDate = new Date(calEvent.start)\r\n          this.events.forEach(function(event){\r\n            if(event.title == calEvent.title){\r\n              event.start = moment(newDate.setHours(calEvent.start.format(\"HH\")))\r\n              event.end = moment(newDate.setHours(calEvent.end.format(\"HH\")))\r\n            }\r\n          })\r\n          this.dataModified = true\r\n        }\r\n      },\r\n      eventResizeStop: function(calEvent){\r\n        console.log('resize')\r\n        \r\n        if(sessionStorage.getItem('role') == 'Salaried' || sessionStorage.getItem('role') == 'Human Resourses Director'){\r\n          alert('Vous n\\'avez pas le droit de modifier votre planning!');\r\n          this.events = JSON.parse(sessionStorage.getItem(\"planningData\"));\r\n        }\r\n        else{\r\n          var newDate = new Date(calEvent.start)\r\n          this.events.forEach(function(event){\r\n            if(event.title == calEvent.title){\r\n              event.start = moment(newDate.setHours(calEvent.start.format(\"HH\")))\r\n              event.end = moment(newDate.setHours(calEvent.end.format(\"HH\")))\r\n            }\r\n          })\r\n          this.dataModified = true\r\n        }\r\n      },\r\n      saveData: function(){\r\n        console.log('dataSave')\r\n        sessionStorage.setItem(\"planningData\", JSON.stringify(this.events))\r\n        this.hourCount();\r\n        this.dataModified = false\r\n      },\r\n      hourCount: function(){\r\n        var data = JSON.parse(sessionStorage.getItem(\"planningData\"))\r\n        this.hours = 0\r\n        var _this = this\r\n        var now = new Date();\r\n        data.forEach(function(day){\r\n          if(moment(now).startOf('day') <= moment(day.start).startOf('day')){\r\n            return\r\n          }\r\n          else{\r\n            var start = moment(day.start)\r\n            var end = moment(day.end)\r\n            _this.hours += moment.duration(end.diff(start)).asHours()\r\n          }\r\n        })\r\n      }\r\n    },\r\n    created: function(){\r\n      this.hourCount();\r\n    }\r\n  }\r\n</script>\r\n\r\n\r\n\r\n     ","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Planning.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Planning.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Planning.vue?vue&type=template&id=01aa27de&\"\nimport script from \"./Planning.vue?vue&type=script&lang=js&\"\nexport * from \"./Planning.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\ncomponent.options.__file = \"Planning.vue\"\nexport default component.exports"],"sourceRoot":""}