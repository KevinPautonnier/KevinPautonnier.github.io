{"version":3,"sources":["webpack:///./src/views/planning/Planning.vue?2c93","webpack:///src/views/planning/Planning.vue","webpack:///./src/views/planning/Planning.vue?146c","webpack:///./src/views/planning/Planning.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","_v","_s","hours","on","click","saveData","_e","ref","attrs","id","events","header","event-selected","eventSelected","event-drop","eventDragStop","event-resize","eventResizeStop","staticRenderFns","moment","__webpack_require__","format","_dataModified","Planningvue_type_script_lang_js_","data","left","center","right","JSON","parse","sessionStorage","getItem","dataModified","methods","calEvent","jsEvent","view","alert","startHour","prompt","endHour","newDate","Date","start","setMinutes","forEach","event","title","console","log","setHours","end","setItem","stringify","hourCount","_this","now","day","startOf","duration","diff","asHours","created","planning_Planningvue_type_script_lang_js_","component","Object","componentNormalizer","options","__file","__webpack_exports__"],"mappings":"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","file":"js/chunk-2d0cc3f3.67ea20d7.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',[_vm._v(\"Nombre d'heure éffectuées : \"+_vm._s(_vm.hours))]),(_vm.dataModified)?_c('button',{on:{\"click\":_vm.saveData}},[_vm._v(\"Enregistrer les modifications\")]):_vm._e(),_c('full-calendar',{ref:\"calendar\",attrs:{\"id\":\"planning\",\"events\":_vm.events,\"header\":_vm.header},on:{\"event-selected\":_vm.eventSelected,\"event-drop\":_vm.eventDragStop,\"event-resize\":_vm.eventResizeStop}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\r\n<template>\r\n  <div>\r\n    <div>Nombre d'heure éffectuées : {{hours}}</div>\r\n    <button v-on:click=\"saveData\" v-if=\"dataModified\">Enregistrer les modifications</button>\r\n    <full-calendar id=\"planning\"  ref=\"calendar\" :events=\"events\" :header=\"header\" @event-selected=\"eventSelected\" @event-drop=\"eventDragStop\" @event-resize=\"eventResizeStop\"></full-calendar>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  var moment = require('moment');\r\n  moment().format();\r\n\r\n  var _dataModified = false\r\n\r\n  export default {\r\n    data () {\r\n      return {\r\n        header: {\r\n          left: 'today prev,next',\r\n          center: 'title',\r\n          right: 'agendaDay,basicDay,agendaWeek,basicWeek'\r\n        },\r\n        events: JSON.parse(sessionStorage.getItem(\"planningData\")),\r\n        dataModified : _dataModified,\r\n        hours: 0\r\n      }\r\n    },\r\n\r\n    methods: {\r\n      eventSelected: function(calEvent, jsEvent, view) {\r\n          if(sessionStorage.getItem('role') == 'Salaried' || sessionStorage.getItem('role') == 'Human Resourses Director'){\r\n            alert('Vous n\\'avez pas le droit de modifier votre planning!');\r\n            this.events = JSON.parse(sessionStorage.getItem(\"planningData\"));\r\n          }\r\n          else{\r\n            var startHour = prompt(\"Entrer l'heure de début\", \"8\");\r\n            var endHour = prompt(\"Entrer l'heure de fin\", \"18\");\r\n            var newDate = new Date(calEvent.start)\r\n            newDate.setMinutes(0)\r\n            this.events.forEach(function(event){\r\n              if(event.title == calEvent.title){\r\n                console.log('toto')\r\n                event.start = moment(newDate.setHours(startHour))\r\n                event.end = moment(newDate.setHours(endHour))\r\n              }\r\n            })\r\n            this.dataModified = true\r\n          }\r\n\r\n       },\r\n      eventDragStop: function(calEvent){\r\n        console.log('drop')\r\n        \r\n        if(sessionStorage.getItem('role') == 'Salaried' || sessionStorage.getItem('role') == 'Human Resourses Director'){\r\n          alert('Vous n\\'avez pas le droit de modifier votre planning!');\r\n          this.events = JSON.parse(sessionStorage.getItem(\"planningData\"));\r\n        }\r\n        else{\r\n          var newDate = new Date(calEvent.start)\r\n          this.events.forEach(function(event){\r\n            if(event.title == calEvent.title){\r\n              event.start = moment(newDate.setHours(calEvent.start.format(\"HH\")))\r\n              event.end = moment(newDate.setHours(calEvent.end.format(\"HH\")))\r\n            }\r\n          })\r\n          this.dataModified = true\r\n        }\r\n      },\r\n      eventResizeStop: function(calEvent){\r\n        console.log('resize')\r\n        \r\n        if(sessionStorage.getItem('role') == 'Salaried' || sessionStorage.getItem('role') == 'Human Resourses Director'){\r\n          alert('Vous n\\'avez pas le droit de modifier votre planning!');\r\n          this.events = JSON.parse(sessionStorage.getItem(\"planningData\"));\r\n        }\r\n        else{\r\n          var newDate = new Date(calEvent.start)\r\n          this.events.forEach(function(event){\r\n            if(event.title == calEvent.title){\r\n              event.start = moment(newDate.setHours(calEvent.start.format(\"HH\")))\r\n              event.end = moment(newDate.setHours(calEvent.end.format(\"HH\")))\r\n            }\r\n          })\r\n          this.dataModified = true\r\n        }\r\n      },\r\n      saveData: function(){\r\n        console.log('dataSave')\r\n        sessionStorage.setItem(\"planningData\", JSON.stringify(this.events))\r\n        this.hourCount();\r\n        this.dataModified = false\r\n      },\r\n      hourCount: function(){\r\n        var data = JSON.parse(sessionStorage.getItem(\"planningData\"))\r\n        this.hours = 0\r\n        var _this = this\r\n        var now = new Date();\r\n        data.forEach(function(day){\r\n          if(moment(now).startOf('day') <= moment(day.start).startOf('day')){\r\n            return\r\n          }\r\n          else{\r\n            var start = moment(day.start)\r\n            var end = moment(day.end)\r\n            _this.hours += moment.duration(end.diff(start)).asHours()\r\n          }\r\n        })\r\n      }\r\n    },\r\n    created: function(){\r\n      this.hourCount();\r\n    }\r\n  }\r\n</script>\r\n\r\n\r\n\r\n     ","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Planning.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Planning.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Planning.vue?vue&type=template&id=3223d34f&\"\nimport script from \"./Planning.vue?vue&type=script&lang=js&\"\nexport * from \"./Planning.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\ncomponent.options.__file = \"Planning.vue\"\nexport default component.exports"],"sourceRoot":""}